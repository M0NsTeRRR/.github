# THIS FILE IS GENERATED! DO NOT EDIT! Maintained by Pulumi
{%- set included_content %}
{%- if changelog %}
{%- include "workflow/changelog/main.yml.j2" +%}
{%- endif %}
{%- if workflow["package"] %}
{% include "workflow/{}/package.yml.j2".format(language) +%}
{%- endif %}
{%- endset %}
name: {{ language }} release
on:
  push:
    tags:
      - '*'
permissions:
  contents: write
{% if workflow["package"] and language == "python" %}
  id-token: write
{% endif %}
jobs: {{ included_content | indent(2) }}

  publish:
    name: Publish release
    runs-on: ubuntu-latest
    needs: [changelog{% if workflow["package"] %}, package{% endif %}]
{%- raw %}
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Create release
        run: gh release edit ${{ github.ref_name }} --draft=false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
{% endraw %}